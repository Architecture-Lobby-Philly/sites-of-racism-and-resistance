(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pvm_MglMap"],{"24a1":function(e,t,n){},"4b1e":function(e,t,n){"use strict";var o=n("24a1"),i=n.n(o);i.a},"7f84":function(e,t,n){(function(t,n){e.exports=n()})(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);var o=[{name:"moveend",check:function(e,t){return t.center&&e.isMoving()}},{name:"zoomend",check:function(e,t){return void 0!==t.zoom&&null!==t.zoom&&e.isZooming()}},{name:"rotateend",check:function(e,t){return void 0!==t.bearing&&null!==t.bearing&&e.isRotating()}},{name:"pitchend",check:function(e,t){return void 0!==t.pitch&&null!==t.bearing&&e.isMoving()}}],i=function(e){return{center:e.getCenter(),zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}},a={events:o,getter:i},r={events:[{name:"moveend",check:function(e){return e.isMoving()}}],getter:function(e){return{center:e.getCenter()}}},s={events:[{name:"zoomend",check:function(e){return e.isZooming()}}],getter:function(e){return{zoom:e.getZoom()}}},c={events:[{name:"rotateend",check:function(e){return e.isRotating()}}],getter:function(e){return{bearing:e.getBearing()}}},u={setCenter:r,panBy:r,panTo:r,setZoom:s,zoomTo:s,zoomIn:s,zoomOut:s,setBearing:c,rotateTo:c,resetNorth:c,snapToNorth:c,setPitch:{events:[{name:"pitchend",check:function(e){return!0}}],getter:function(e){return{pitch:e.getPitch()}}},fitBounds:{events:[{name:"zoomend",check:function(e){return e.isZooming()}},{name:"moveend",check:function(e){return e.isMoving()}},{name:"rotateend",check:function(e){return e.isRotating()}}],getter:function(e){return{zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),center:e.getCenter()}}},fitScreenCoordinates:{events:[{name:"zoomend",check:function(e,t){return e.isZooming()}},{name:"moveend",check:function(e,t){return e.isMoving()}},{name:"rotateend",check:function(e,t){return t.bearing&&e.isRotating()}}],getter:function(e){return{zoom:e.getZoom(),center:e.getCenter(),bearing:e.getBearing(),pitch:e.getPitch()}}},jumpTo:a,easeTo:a,flyTo:a};function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){p(e,t,n[t])}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return"".concat(e,"-").concat((""+Math.random()).split(".")[1])}function f(e,t,n,o){var i=function i(a){a.type===t&&a.eventId===n&&(e.off(t,i),o(a))};return i}function h(e,t){var n=e[t],o=n.length;return function(){for(var i=[],a={eventId:d(t)},r=u[t].events.map((function(t,n){return{event:t,func:new Promise((function(o,r){i[n]={event:t,func:f(e,t.name,a.eventId,o)},e.on(t.name,i[n].func)}))}})),s=[],c=0;c<o;c++)c===o-1?s.push(m({},a,(c<0||arguments.length<=c?void 0:arguments[c])||{})):s.push((c<0||arguments.length<=c?void 0:arguments[c])||null);var p=[],h=(arguments.length<=0?void 0:arguments[0])||{};try{n.apply(e,s),"fitBounds"===t&&(h={}),"fitScreenCoordinates"===t&&(h={bearing:null},h.bearing=null,"number"===typeof(arguments.length<=2?void 0:arguments[2])&&(h.bearing=arguments.length<=2?void 0:arguments[2]),(arguments.length<=3?void 0:arguments[3])&&"object"===l(arguments.length<=3?void 0:arguments[3])&&(h=m({},h,arguments.length<=3?void 0:arguments[3]))),p=r.map((function(t){var n=t.event,o=t.func;return n.check(e,h)?o:(e.off(n.name,o),Promise.resolve())}))}catch(g){throw i.forEach((function(t){var n=t.event,o=t.func;e.off(n.name,o)})),g}return Promise.all(p).then((function(){return u[t].getter(e)}))}}var g=h,v=function(e){var t=Object.keys(u),n={};return t.forEach((function(o){-1!==t.indexOf(o)&&(n[o]=g(e,o))})),n};function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?g(e,t):v(e)}n.d(t,"default",(function(){return b}))}])["default"]}))},"818b":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.mapContainerClass+" mgl-map-wrapper",attrs:{id:"map-container"}},[e._m(0),e.initialized?e._t("default"):e._e()],2)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",attrs:{id:e.container}})}],a=(n("d81d"),n("b64b"),n("d3b7"),n("b85c")),r=n("5530"),s=n("9f0b"),c={resize:{name:"resize"},webglcontextlost:{name:"webglcontextlost"},webglcontextrestored:{name:"webglcontextrestored"},remove:{name:"remove"},movestart:{name:"movestart"},load:{name:"load"},contextmenu:{name:"contextmenu"},dblclick:{name:"dblclick"},click:{name:"click"},touchcancel:{name:"touchcancel"},touchmove:{name:"touchmove"},touchend:{name:"touchend"},touchstart:{name:"touchstart"},dataloading:{name:"dataloading"},mousemove:{name:"mousemove"},mouseup:{name:"mouseup"},mousedown:{name:"mousedown"},sourcedataloading:{name:"sourcedataloading"},error:{name:"error"},data:{name:"data"},styledata:{name:"styledata"},sourcedata:{name:"sourcedata"},mouseout:{name:"mouseout"},styledataloading:{name:"styledataloading"},moveend:{name:"moveend"},move:{name:"move"},render:{name:"render"},zoom:{name:"zoom"},zoomstart:{name:"zoomstart"},zoomend:{name:"zoomend"},boxzoomstart:{name:"boxzoomstart"},boxzoomcancel:{name:"boxzoomcancel"},boxzoomend:{name:"boxzoomend"},rotate:{name:"rotate"},rotatestart:{name:"rotatestart"},rotateend:{name:"rotateend"},dragend:{name:"dragend"},drag:{name:"drag"},dragstart:{name:"dragstart"},pitch:{name:"pitch"},idle:{name:"idle"}},u={container:{type:[String,HTMLElement],default(){return"map-"+(""+Math.random()).split(".")[1]}},accessToken:{type:String,default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},mapStyle:{type:[String,Object],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},pitchWithRotate:{type:Boolean,default:!0},clickTolerance:{type:Number,default:3},attributionControl:{type:Boolean,default:!0},customAttribution:{type:[String,Array],default:null},logoPosition:{type:String,default:"bottom-left",validator:e=>["top-left","top-right","bottom-left","bottom-right"].includes(e)},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:Array,default(){}},scrollZoom:{type:[Boolean,Object],default(){return!0}},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default(){return!0}},trackResize:{type:Boolean,default:!0},center:{type:[Object,Array],default:void 0},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},bounds:{type:[Object,Array],default:void 0},fitBoundsOptions:{type:Object,default:void 0},renderWorldCopies:{type:Boolean,default:!0},RTLTextPluginUrl:{type:String,default:void 0},light:{type:Object,default:void 0},tileBoundaries:{type:Boolean,default:!1},collisionBoxes:{type:Boolean,default:!1},repaint:{type:Boolean,default:!1},transformRequest:{type:Function,default:null},maxTileCacheSize:{type:Number,default:null},localIdeographFontFamily:{type:String,default:null},collectResourceTiming:{type:Boolean,default:!1},fadeDuration:{type:Number,default:300},crossSourceCollisions:{type:Boolean,default:!0}};const l={maxBounds(e){this.map.setMaxBounds(e)},minZoom(e){this.map.setMinZoom(e)},maxZoom(e){this.map.setMaxZoom(e)},mapStyle(e){this.map.setStyle(e)},collisionBoxes(e){this.map.showCollisionBoxes=e},tileBoundaries(e){this.map.showTileBoundaries=e},repaint(e){this.map.repaint=e},zoom(e){this.map.setZoom(e)},center(e){this.map.setCenter(e)},bearing(e){this.map.setBearing(e)},pitch(e){this.map.setPitch(e)},light(e){this.map.setLigh(e)}};function m(e,t,n,o){this.initial||(this.$listeners["update:"+e]?(this.propsIsUpdating[e]?(this._watcher.active=!1,this.$nextTick(()=>{this._watcher.active=!0})):(this._watcher.active=!0,t(n,o)),this.propsIsUpdating[e]=!1):t(n,o))}function p(){const e={};return Object.entries(l).forEach(t=>{e[t[0]]=function(e,n){return m.call(this,t[0],t[1].bind(this),e,n)}}),e}var d={watch:p()},f={methods:{$_updateSyncedPropsFabric(e,t){return()=>{this.propsIsUpdating[e]=!0;let n="function"===typeof t?t():t;return this.$emit("update:"+e,n)}},$_bindPropsUpdateEvents(){const e=[{events:["moveend"],prop:"center",getter:this.map.getCenter.bind(this.map)},{events:["zoomend"],prop:"zoom",getter:this.map.getZoom.bind(this.map)},{events:["rotate"],prop:"bearing",getter:this.map.getBearing.bind(this.map)},{events:["pitch"],prop:"pitch",getter:this.map.getPitch.bind(this.map)}];e.forEach(({events:e,prop:t,getter:n})=>{e.forEach(e=>{this.$listeners["update:"+t]&&this.map.on(e,this.$_updateSyncedPropsFabric(t,n))})})},$_loadMap(){return this.mapboxPromise.then(e=>(this.mapbox=e.default?e.default:e,new Promise(e=>{this.accessToken&&(this.mapbox.accessToken=this.accessToken);const t=new this.mapbox.Map({...this._props,container:this.$refs.container,style:this.mapStyle});this.$emit("preload",{map:t,component:this}),t.on("load",(function(){e(t)}))})))},$_RTLTextPluginError(e){this.$emit("rtl-plugin-error",{map:this.map,error:e})},$_bindMapEvents(e){Object.keys(this.$listeners).forEach(t=>{e.includes(t)&&this.map.on(t,this.$_emitMapEvent)})},$_unbindEvents(e){e.forEach(e=>{this.map.off(e,this.$_emitMapEvent)})}}},h=n("7f84"),g=n.n(h),v={created(){this.actions={}},methods:{$_registerAsyncActions(e){this.actions={...g()(e),stop(){this.map.stop();const e={pitch:this.map.getPitch(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),center:this.map.getCenter()};return Object.entries(e).forEach(e=>{this.$_updateSyncedPropsFabric(e[0],e[1])()}),Promise.resolve(e)}}}}},b={name:"GlMap",mixins:[d,v,f,s["a"]],props:Object(r["a"])({mapboxGl:{type:Object,default:null}},u),provide:function(){var e=this;return{get mapbox(){return e.mapbox},get map(){return e.map},get actions(){return e.actions}}},data:function(){return{initial:!0,initialized:!1}},computed:{cyclomediaActive:function(){var e;return this.$store.state.cyclomedia&&(e=this.$store.state.cyclomedia.active),e},pictometryActive:function(){var e;return this.$store.state.pictometry&&(e=this.$store.state.pictometry.active),e},picOrCycloActive:function(){return!(!this.cyclomediaActive&&!this.pictometryActive)},mapContainerClass:function(){var e;return this.$config&&(e=!this.picOrCycloActive||"horizontal"!==this.$config.cyclomedia.orientation&&"horizontal"!==this.$config.pictometry.orientation?this.picOrCycloActive?this.$config.map.containerClassWCyclo?this.$config.map.containerClassWCyclo:"height50":this.$config.map.containerClass?this.$config.map.containerClass:"map-container":this.$config.map.containerClassWCyclo?this.$config.map.containerClassWCyclo:"height50"),e},loaded:function(){return!!this.map&&this.map.loaded()},version:function(){return this.map?this.map.version:null},isStyleLoaded:function(){return!!this.map&&this.map.isStyleLoaded()},areTilesLoaded:function(){return!!this.map&&this.map.areTilesLoaded()},isMoving:function(){return!!this.map&&this.map.isMoving()},canvas:function(){return this.map?this.map.getCanvas():null},canvasContainer:function(){return this.map?this.map.getCanvasContainer():null},images:function(){return this.map?this.map.listImages():null}},created:function(){this.map=null,this.propsIsUpdating={},this.mapboxPromise=this.mapboxGl?Promise.resolve(this.mapboxGl):n.e("chunk-2d22497b").then(n.t.bind(null,"e192",7))},mounted:function(){var e=this;console.log("GlMap.vue mounted, this:",this),this.$_loadMap().then((function(t){e.map=t,void 0!==e.RTLTextPluginUrl&&e.mapbox.setRTLTextPlugin(e.RTLTextPluginUrl,e.$_RTLTextPluginError);var n=Object.keys(c);e.$_bindMapEvents(n),e.$_registerAsyncActions(t),e.$_bindPropsUpdateEvents(),e.initial=!1,e.initialized=!0,e.testMethod(t),e.$emit("load",{map:t,component:e})}))},beforeDestroy:function(){var e=this;this.$nextTick((function(){e.map&&e.map.remove()}))},methods:{testMethod:function(e){var t=this;this.$nextTick((function(){var e,n=Object(a["a"])(t.$children);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.parentMounted&&o.parentMounted(t,o.$props)}}catch(i){n.e(i)}finally{n.f()}}))}}},y=b,x=(n("4b1e"),n("2877")),$=Object(x["a"])(y,o,i,!1,null,null,null);t["default"]=$.exports},"9f0b":function(e,t,n){"use strict";t["a"]={methods:{$_emitEvent(e,t={}){this.$emit(e,{map:this.map,component:this,...t})},$_emitMapEvent(e,t={}){this.$_emitEvent(e.type,{mapboxEvent:e,...t})}}}}}]);
//# sourceMappingURL=pvm_MglMap.js.map